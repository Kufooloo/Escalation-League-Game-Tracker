{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}Submit Precon Escalation League Game{% endblock %}</h1>
{% endblock %}


{% block content %}
<form method="POST">

  <!-- Game Info -->
  <fieldset>
    <legend>Game Info</legend>

    <label>
      Round
      <input type="number" name="round" min="1" required>
    </label>

    <label>
      Date
  <input
    type="date"
    name="date"
    value="{{ today }}"
    required
  >    </label>
  </fieldset>
<div class="page-content">
  <!-- Players -->
  <section id="players"></section>
</div>

<div class="action-bar">
  <button type="button" id="add-player" class="btn btn-add">
    âž• Add Player
  </button>

  <button type="submit" class="btn btn-submit">
    Submit Game
  </button>
</div>
</form>

<!-- Player template -->
<template id="player-template">
  <details open class="player">
  <summary>
      Player <span class="player-number"></span>
      <span class="player-summary"></span>
  </summary>


  <div class="autocomplete">
    <label>Name</label>
    <input
      type="text"
      name="__NAME__"
      class="name-input"
      autocomplete="off"
    >
    <div class="autocomplete-results"></div>
  </div>

<div class="autocomplete">
  <label>Deck</label>
  <input
    type="text"
    name="__DECK__"
    class="deck-input"
    autocomplete="off"
  >
  <div class="autocomplete-results"></div>
</div>

<div class="autocomplete">
  <label>Commander</label>
  <input
    type="text"
    name="__COMMANDER__"
    class="commander-input"
    autocomplete="off"
  >
  <div class="autocomplete-results"></div>
</div>
    <div class="field">
      <label>Place</label>
      <input type="number" name="__PLACE__" min="1">
    </div>

    <div class="field">
      <label>Turn Order</label>
      <input type="number" name="__TURN__" min="1">
    </div>

    <button type="button" class="btn btn-remove remove-player">
      Remove Player
    </button>

  </details>
</template>

{% endblock %}

{% block scripts %}
<script>
  const PRECON_DATA = {{ precon_autocomplete | default([]) | tojson }};
  const COMMANDERS   = {{ commander_list   | default([]) | tojson }};
  const NAMES        = {{ name_list       | default([]) | tojson }};
</script>



<script src="{{ url_for('static', filename='submit.js') }}"></script>
{% endblock %}